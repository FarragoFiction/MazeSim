<link rel="stylesheet" type="text/css" href="mazing.css">
<link rel="stylesheet" type="text/css" href="zampanio.css">

<div id="container">
  <div id="story_container">
    
    <div>
      <label>Do you traverse mazes clockwise or counterclockwise? </label>
      <select id="traversal-mode">
        <option>Clockwise, of course.</option>
        <option>Counterclockwise.</option>
      </select>
      <div id="response"></div>
    </div>
    <button id="play-button">Pause</button>
    <p>JR NOTE: TODO</p>
    <ul>

      <li>if maze changes, scroll to center of new maze</li>
      <li>can i keep generating mazes as you scroll? (always at least one maze off screen)</li>
      <li>entirely different content is found if you're mirrored (clockwise vs counterclockwise) (artifact based?)</li>
      <li>can i have the lil wanderer find things in the maze and report on them in this area? (render in square)</li>
      <li>can i make it severely fucked up and liminal and meta? wanderer finds worse and worse shit over time.  (zampanini tie in? bags from fast food restaurants at first, etc)</li>
      <li>can i utilize the old timey images from that museum? https://www.si.edu/search/collection-images?edan_q=flower&oa=1&edan_fq%5B0%5D=media_usage%3ACC0</li>
      <li>if memory use becomes  aproblem, need to garbage collect old mazes, after all, you can only go south....right?</li>
      <li>if the wanderer finds something, stop for thirty seconds to process it</li>
      <li>rage mode: the original scrolling alg i used that went every frame is used</li>
    </ul>
  </div>
<div id="maze_container"><!-- --></div>
</div>

<script src="utils.js"></script>

<script src="maze-builder.js"></script>
<script src="wanderer.js"></script>

<script>

let parent;
let wanderer;
let maze_index = 0;
  window.onload = ()=>{
     parent = document.querySelector("#maze_container");
    renderOneMaze(maze_index++);
    renderOneMaze(maze_index++);
    wanderer = new Wanderer();
    let button = document.querySelector("#play-button");
    button.onclick = togglePlayPause;

    let select = document.querySelector("#traversal-mode");
    select.onchange = (e)=>{
      if(select.value.includes("Counter")){
        wanderer.traverses_mazes_clockwise = false;
        //removed because your job here isn't to PLAY this game. you have one choice. you're not supposed to go back and forth to direct the Wanderer.
        select.remove();
        let response = document.querySelector("#response");
        response.innerText = "Your answer deviates. But is noted.";
      }

    }
    wanderer.wander();
  }

  const togglePlayPause = (e)=>{
    let button =e.target;
    console.log(button);
    if(button.innerText === "Pause"){
      button.innerText = "Play";
      wanderer.pause();
    }else{
      button.innerText = "Pause";
      wanderer.resume();
    }
  }

  const renderOneMaze = (first=false)=>{
    const ele = createElementWithClassAndParent("div",parent,"jr-maze")
    let Maze = new MazeBuilder(30, 20,first);
    Maze.display(ele);
  }



</script>